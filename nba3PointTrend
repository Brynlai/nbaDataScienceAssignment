# Set working directory first !!
setwd("C:/Users/wbrya/OneDrive/Documents/nbaData/large/csv") # Change to your working directory.
getwd()

# Load libraries
library(readr)
library(dplyr)
library(janitor)
library(ggplot2)

# Read data from CSV
data <- read_csv("game.csv")

# - Exploration
# View dataset dimensions
print(dim(data))

# - Data Cleaning
# Filter data by date range
data <- data %>%
  filter(game_date >= as.Date("1983-12-31") & game_date <= as.Date("2023-06-13"))

# View dataset dimensions
print(dim(data))

# View column names
print(colnames(data))


data <- data %>%
  filter(fg3a_home >= 2 & fg3a_away >= 2)

# Remove rows with missing values
data <- data %>%
  filter(!is.na(fg3_pct_home) & !is.na(fg3_pct_away))

# Remove rows where fg3_pct_home or fg3_pct_away equals 1 or 0
data <- data %>%
  filter(fg3_pct_home != 1 & fg3_pct_home != 0 &
           fg3_pct_away != 1 & fg3_pct_away != 0)

# - Visualization
# Plot 3-point attempts over time for both home and away teams
ggplot(data, aes(x = game_date)) +
  geom_point(aes(y = fg3a_home), color = "blue", size = 0.5, alpha = 1) +
  geom_point(aes(y = fg3a_away), color = "red", size = 0.5, alpha = 1) +
  labs(title = "Trend of 3-Point Attempts Over Time",
       x = "Game Date",
       y = "3-Point Attempts") +
  theme_minimal()

